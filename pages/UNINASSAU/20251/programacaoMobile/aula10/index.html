<!doctype html>
<html lang="pt-BR">

<head>
  <meta charset="utf-8">
  <title>Aula 10 - Banco de dados com React Native Expo</title>

  <meta name="description" content="AsyncStorage e integra√ß√£o com banco de dados React Native Expo">
  <meta name="author" content="Prof. Dr. Diogo Francisco Borba Rodrigues">

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="../../../reveal.js-master/dist/reset.css">
  <link rel="stylesheet" href="../../../reveal.js-master/dist/reveal.css">
  <link rel="stylesheet" href="../../../reveal.js-master/dist/theme/dracula.css" id="theme">

  <!-- Syntax Highlighting -->
  <link rel="stylesheet" href="../../../reveal.js-master/plugin/highlight/monokai.css">

  <style>
    .code-highlight {
      background-color: rgba(255, 255, 0, 0.2);
    }
    .important-note {
      color: #ff6b6b;
      font-weight: bold;
    }
    .demo-image {
      max-height: 400px;
      border: 2px solid #666;
      border-radius: 5px;
    }
    .container {
      display: flex;
      justify-content: space-between;
    }
    .column {
      width: 48%;
    }
  </style>

</head>

<body>

  <div class="reveal">
    <div class="slides">
      <!-- Slide 1 - T√≠tulo da Aula -->
      <section>
        <p>üèõÔ∏è Centro Universit√°rio Maur√≠cio de Nassau</p>
        <h3>Aula 10 - Banco de dados com React Native Expo</h3>
        <p>Prof. Dr. Diogo Francisco Borba Rodrigues</p>
        <a href="https://www.linkedin.com/in/diogo-francisco-borba-rodrigues-3a1b5179/" target="_blank">
          <i class="fab fa-linkedin"></i>
        </a>
        <a href="https://github.com/DIOGOBRODRIGUES" target="_blank">
          <i class="fab fa-github"></i>
        </a>
      </section>

      

      <!-- Slide 4 - Introdu√ß√£o -->
      <section>
        <h2>üåü Introdu√ß√£o</h2>
        <section>
          <h3>Por que armazenar dados localmente?</h3>
          <ul>
            <li>Funcionamento offline da aplica√ß√£o</li>
            <li>Melhoria na experi√™ncia do usu√°rio (menos tempo de espera)</li>
            <li>Redu√ß√£o de chamadas de API</li>
            <li>Persist√™ncia de prefer√™ncias do usu√°rio</li>
            <li>Cache de dados frequentemente acessados</li>
          </ul>
        </section>
      </section>

      <!-- Slide 5 - Tipos de Armazenamento -->
      <section>
        <h2>üóÉÔ∏è Tipos de Armazenamento no React Native</h2>
        <div class="container" style="font-size:0.8em">
          <div class="column">
            <h3>AsyncStorage</h3>
            <ul>
              <li>API de armazenamento chave-valor</li>
              <li>Semelhante ao localStorage do navegador</li>
              <li>Adequado para dados simples</li>
              <li>N√£o relacional</li>
              <li>F√°cil implementa√ß√£o</li>
            </ul>
          </div>
          <div class="column">
            <h3>SQLite</h3>
            <ul>
              <li>Banco de dados relacional</li>
              <li>Suporte a consultas SQL</li>
              <li>Adequado para grandes volumes de dados</li>
              <li>Relacionamentos complexos</li>
              <li>Transa√ß√µes e integridade</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- AsyncStorage -->
      <section>
        <section>
          <h2>üì¶ AsyncStorage</h2>
          <p>Sistema de armazenamento chave-valor ass√≠ncrono, n√£o-criptografado e persistente para React Native</p>
          <div class="important-note">
            <p>‚ö†Ô∏è Originalmente, o AsyncStorage fazia parte do core do React Native, mas foi removido do n√∫cleo e passou a ser m√≥dulo independente.
                Por isso, √© necess√°rio instal√°-lo separadamente com o comando:</p>
            <pre><code data-trim data-noescape>
              npm install @react-native-async-storage/async-storage
            </code></pre>
          </div>
        </section>
        <section>
            <h2>üì¶ O que s√£o Promises?</h2>
            <p>
              Uma <strong>Promise</strong> em JavaScript representa uma opera√ß√£o <strong>ass√≠ncrona</strong> que pode:
            </p>
            <ul>
              <li>‚úÖ Ser <strong>resolvida</strong> (fulfilled)</li>
              <li>‚ùå Ser <strong>rejeitada</strong> (rejected)</li>
              <li>‚è≥ Estar <strong>pendente</strong> (pending)</li>
            </ul>
            <p>Ela permite <strong>trabalhar com resultados futuros</strong>, como chamadas de API ou leitura de arquivos.</p>
          </section>
        <section>
          <h3>Caracter√≠sticas do AsyncStorage</h3>
          <ul>
            <li>üîÑ API global e ass√≠ncrona. <strong>As opera√ß√µes (getItem, setItem, removeItem) retornam Promises.</strong></li>
            <li>üîë Armazenamento no formato chave-valor</li>
            <li>üì± Espec√≠fico para cada aplicativo (isolado)</li>
            <li>‚ö†Ô∏è N√£o √© adequado para dados sens√≠veis (n√£o √© criptografado)</li>
            <li>üìä Melhor para dados pequenos (prefer√™ncias,  configura√ß√µes)</li>
          </ul>
        </section>
        <section>
            <h2>üß† Onde o AsyncStorage guarda os dados?</h2>
            <p>O <code>AsyncStorage</code> armazena dados <strong>localmente</strong> no dispositivo do usu√°rio.</p>
            <ul>
              <li>üîê Persistente (sobrevive ao fechar o app)</li>
              <li>‚ö†Ô∏è N√£o criptografado</li>
              <li>‚öôÔ∏è Armazenamento do tipo <strong>chave-valor</strong></li>
            </ul>
          </section>
          
          <section>
            <h3>üì± Android</h3>
            <p>Os dados ficam dentro da sandbox do app:</p>
            <pre><code>/data/data/<nome_do_pacote>/shared_prefs/RKStorage.xml</code></pre>
            <ul>
              <li>üì¶ Armazenado como XML</li>
              <li>üîí Acesso direto s√≥ com root ou Android Studio</li>
            </ul>
          </section>
          
          <section>
            <h3>üçè iOS</h3>
            <p>No iOS, o AsyncStorage usa <code>NSUserDefaults</code>:</p>
            <pre><code><App Sandbox>/Library/Preferences</code></pre>
            <ul>
              <li>üíæ Integrado ao sistema nativo do iOS</li>
              <li>üîç Vis√≠vel com Xcode ou ferramentas como Flipper</li>
            </ul>
          </section>
          
          <section>
            <h3>üß™ Como inspecionar os dados?</h3>
            <ul>
              <li>üß≠ <strong>Console do app</strong> com <code>getAllKeys</code> + <code>multiGet</code></li>
              <li>üßπ <strong>Limpeza r√°pida:</strong> <code>AsyncStorage.clear()</code></li>
              
            </ul>
          </section>
          
          <section>
            <h2>‚ö†Ô∏è Observa√ß√µes Importantes</h2>
            <ul>
              <li>‚ùå N√£o armazene informa√ß√µes sens√≠veis (ex: tokens, senhas)</li>
              
              <li>üö´ Dados do AsyncStorage podem ser apagados ao reinstalar o app</li>
            </ul>
          </section>
        <section>
            <h3>Opera√ß√µes b√°sicas com AsyncStorage <code>setItem</code> e <code>getItem</code></h3>
            <div class="container">
                <div class="column" style="font-size: 0.7em;">
                    <p>Este aplicativo demonstra o uso do AsyncStorage para:</p>
                    <ul>
                        <li>Capturar o nome digitado pelo usu√°rio</li>
                        <li>Armazenar o nome usando <code>setItem</code></li>
                        <li>Recuperar e exibir o nome usando <code>getItem</code></li>
                        <li>Persistir os dados entre sess√µes do app</li>
                    </ul>
                    <p>O estado √© mantido mesmo quando o app √© fechado e reaberto.</p>
                </div>
                <div class="column">
                    <img src="assets/img1.jpeg" alt="AsyncStorage operations example" class="demo-image" style="max-width: 60%; height: auto;">
                </div>
            </div>
        </section>
        <section>
          <h3>Opera√ß√µes b√°sicas com AsyncStorage <code>setItem</code> e <code>getItem</code></h3>
          <pre><code class="javascript" data-trim data-line-numbers="12|14-17|19-23|24-31|34-44|47-58|65-71|73-79|82">
            <script>
import React, { useEffect, useState } from 'react';
import {
  View,
  Text,
  TextInput,
  TouchableOpacity,
  StyleSheet,
  Alert,
  Keyboard,
} from 'react-native';
import AsyncStorage from '@react-native-async-storage/async-storage';

export default function App() {
  const [nome, setNome] = useState('');

  const [nomeSalvo, setNomeSalvo] = useState('');

  // Hook de efeito que √© executado uma √∫nica vez quando o componente √© montado
  useEffect(() => {
    // Carrega o nome salvo do AsyncStorage quando o app inicia
    carregarNomeSalvo();
  }, []);

  // Fun√ß√£o ass√≠ncrona para salvar o nome no AsyncStorage
  const salvarNome = async () => {
    try {
      // Valida√ß√£o para n√£o permitir nomes vazios
      if (nome.trim() === '') {
        Alert.alert('Erro', 'Digite um nome v√°lido');
        return;
      }

      // Salva o nome no AsyncStorage com a chave '@nome_usuario'
      // await- espera a opera√ß√£o ser conclu√≠da
      await AsyncStorage.setItem('@nome_usuario', nome);
      setNomeSalvo(nome);
      // Fecha o teclado virtual ap√≥s salvar
      Keyboard.dismiss();
      // Exibe mensagem de sucesso para o usu√°rio
      Alert.alert('Sucesso', 'Nome salvo com sucesso!');
    } catch (error) {
      console.log(error);
    }
  };

  // Fun√ß√£o ass√≠ncrona para recuperar o nome salvo do AsyncStorage
  const carregarNomeSalvo = async () => {
    try {
      // Busca o item com a chave '@nome_usuario' no AsyncStorage
      const nomeArmazenado = await AsyncStorage.getItem('@nome_usuario');
      // Se encontrar um valor (n√£o nulo), atualiza o estado
      if (nomeArmazenado !== null) {
        setNomeSalvo(nomeArmazenado);
      }
    } catch (error) {
      console.log(error);
    }
  };

  // Renderiza√ß√£o da interface do usu√°rio
  return (
    <View style={styles.container}>
      <Text style={styles.titulo}>üëã Seja bem-vindo!</Text>

      {/* Renderiza√ß√£o condicional: mostra mensagem de boas-vindas com nome se existir, ou instru√ß√£o caso contr√°rio */}
      {nomeSalvo ? (
        <Text style={styles.boasVindas}>Ol√°, {nomeSalvo} üë®‚Äçüíª</Text>
      ) : (
        <Text style={styles.boasVindas}>Digite seu nome abaixo:</Text>
      )}

      {/* Campo de entrada para digita√ß√£o do nome */}
      <TextInput
        style={styles.input}
        placeholder="Seu nome"
        value={nome} //Isso torna o TextInput um componente controlado, ou seja, o que aparece no campo sempre vem do estado do React.
        onChangeText={setNome}
      />

      {/* Bot√£o para salvar o nome digitado */}
      <TouchableOpacity style={styles.botao} onPress={salvarNome}>
        <Text style={styles.textoBotao}>üíæ Salvar Nome</Text>
      </TouchableOpacity>
    </View>
  );
}

// Defini√ß√£o dos estilos utilizando StyleSheet
const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#1E1E2A', // Fundo escuro
    alignItems: 'center',
    justifyContent: 'center',
    padding: 20,
  },
  titulo: {
    fontSize: 30,
    color: '#FFFFFF', // Texto branco
    marginBottom: 20,
    fontWeight: 'bold',
  },
  boasVindas: {
    fontSize: 20,
    color: '#CCCCCC', // Texto cinza claro
    marginBottom: 30,
  },
  input: {
    width: '100%',
    backgroundColor: '#FFFFFF',
    padding: 15,
    borderRadius: 10,
    fontSize: 18,
    marginBottom: 20,
  },
  botao: {
    backgroundColor: '#3D85C6', // Bot√£o azul
    paddingVertical: 12,
    paddingHorizontal: 25,
    borderRadius: 10,
  },
  textoBotao: {
    fontSize: 18,
    color: '#FFF',
    fontWeight: 'bold',
  },
});
</script></code></pre>
        </section>
        <section>
            <h3>Armazenamento de objetos JSON</h3>
            <div class="container">
                    <div class="column" style="font-size: 0.7em;">
                            <p>Este exemplo demonstra:</p>
                            <ul>
                                    <li>Como armazenar objetos JSON completos no AsyncStorage</li>
                                    <li>A necessidade de <code>JSON.stringify()</code> antes de armazenar</li>
                                    <li>Uso de <code>JSON.parse()</code> para recuperar o objeto</li>
                                    <li>Remo√ß√£o de objetos armazenados
                                        <code>AsyncStorage.removeItem</code></li>
                            </ul>
                            <p>AsyncStorage s√≥ armazena strings, ent√£o a convers√£o para JSON √© essencial para objetos.</p>
                    </div>
                    <div class="column">
                            <img src="assets/img2.png" alt="JSON Storage Example" class="demo-image" style="max-width: 80%; height: auto;">
                    </div>
            </div>
        </section>
        <section>
          <h3>Armazenando objetos JSON</h3>
          <pre><code class="javascript" data-trim data-line-numbers="17-19|40-45|47-48|50-51|67-73|75-78|85-97|105-111"><script>
import React, { useEffect, useState } from 'react';
import {
  View,
  Text,
  TextInput,
  TouchableOpacity,
  StyleSheet,
  Alert,
  Keyboard,
  ScrollView,
} from 'react-native';
import AsyncStorage from '@react-native-async-storage/async-storage';

export default function App() {
  // Estados para os campos do formul√°rio
  const [nome, setNome] = useState('');
  const [email, setEmail] = useState('');
  const [idade, setIdade] = useState('');
  
  // Estado para armazenar os dados do usu√°rio salvos
  const [dadosUsuario, setDadosUsuario] = useState(null);

  // Hook de efeito que √© executado uma √∫nica vez quando o componente √© montado
  useEffect(() => {
    // Carrega os dados salvos do AsyncStorage quando o app inicia
    carregarDadosUsuario();
  }, []);

  // Fun√ß√£o ass√≠ncrona para salvar os dados do usu√°rio no AsyncStorage como JSON
  const salvarDados = async () => {
    try {
      // Valida√ß√£o para n√£o permitir nome vazio
      if (nome.trim() === '') {
        Alert.alert('Erro', 'Digite um nome v√°lido');
        return;
      }

      // Cria√ß√£o do objeto de dados do usu√°rio
      const dadosParaSalvar = {
        nome: nome,
        email: email.trim() || 'N√£o informado',
        idade: idade.trim() || 'N√£o informada',
        dataAtualizacao: new Date().toLocaleString('pt-BR')
      };

      // Converte o objeto para string JSON e salva no AsyncStorage
      await AsyncStorage.setItem('@dados_usuario', JSON.stringify(dadosParaSalvar));
      
      // Atualiza o estado com os dados salvos
      setDadosUsuario(dadosParaSalvar);
      
      // Fecha o teclado virtual ap√≥s salvar
      Keyboard.dismiss();
      
      // Exibe mensagem de sucesso para o usu√°rio
      Alert.alert('Sucesso', 'Dados salvos com sucesso!');
    } catch (error) {
      console.log(error);
      Alert.alert('Erro', 'N√£o foi poss√≠vel salvar os dados');
    }
  };

  // Fun√ß√£o ass√≠ncrona para recuperar os dados salvos do AsyncStorage
  const carregarDadosUsuario = async () => {
    try {
      // Busca o item com a chave '@dados_usuario' no AsyncStorage
      const dadosArmazenados = await AsyncStorage.getItem('@dados_usuario');
      
      // Se encontrar um valor (n√£o nulo), converte de volta para objeto e atualiza o estado
      if (dadosArmazenados !== null) {
        const dadosConvertidos = JSON.parse(dadosArmazenados);
        setDadosUsuario(dadosConvertidos);
        
        // Preenche os campos do formul√°rio com os dados salvos
        setNome(dadosConvertidos.nome || '');
        setEmail(dadosConvertidos.email || '');
        setIdade(dadosConvertidos.idade || '');
      }
    } catch (error) {
      console.log(error);
    }
  };

  // Fun√ß√£o para limpar todos os dados
  const limparDados = async () => {
    try {
      await AsyncStorage.removeItem('@dados_usuario');
      setDadosUsuario(null);
      setNome('');
      setEmail('');
      setIdade('');
      Alert.alert('Sucesso', 'Dados removidos com sucesso!');
    } catch (error) {
      console.log(error);
    }
  };

  // Renderiza√ß√£o da interface do usu√°rio
  return (
    <ScrollView contentContainerStyle={styles.scrollContainer}>
      <View style={styles.container}>
        <Text style={styles.titulo}>üëã Seja bem-vindo!</Text>

        {/* Renderiza√ß√£o condicional: mostra dados do usu√°rio se existirem, ou instru√ß√£o caso contr√°rio */}
        {dadosUsuario ? (
          <View style={styles.dadosContainer}>
            <Text style={styles.boasVindas}>Ol√°, {dadosUsuario.nome} üë®‚Äçüíª</Text>
            <Text style={styles.dadosTexto}>Email: {dadosUsuario.email}</Text>
            <Text style={styles.dadosTexto}>Idade: {dadosUsuario.idade}</Text>
            <Text style={styles.dadosTexto}>Atualizado: {dadosUsuario.dataAtualizacao}</Text>
          </View>
        ) : (
          <Text style={styles.boasVindas}>Preencha seus dados abaixo:</Text>
        )}

        {/* Campo de entrada para digita√ß√£o do nome */}
        <TextInput
          style={styles.input}
          placeholder="Seu nome"
          value={nome}
          onChangeText={setNome}
        />

        {/* Campo de entrada para email */}
        <TextInput
          style={styles.input}
          placeholder="Seu email"
          value={email}
          onChangeText={setEmail}
          keyboardType="email-address"
        />

        {/* Campo de entrada para idade */}
        <TextInput
          style={styles.input}
          placeholder="Sua idade"
          value={idade}
          onChangeText={setIdade}
          keyboardType="numeric"
        />

        {/* Bot√£o para salvar os dados */}
        <TouchableOpacity style={styles.botao} onPress={salvarDados}>
          <Text style={styles.textoBotao}>üíæ Salvar Dados</Text>
        </TouchableOpacity>

        {/* Bot√£o para limpar os dados (aparece apenas se tiver dados salvos) */}
        {dadosUsuario && (
          <TouchableOpacity style={styles.botaoLimpar} onPress={limparDados}>
            <Text style={styles.textoBotao}>üóëÔ∏è Limpar Dados</Text>
          </TouchableOpacity>
        )}
      </View>
    </ScrollView>
  );
}

// Defini√ß√£o dos estilos utilizando StyleSheet
const styles = StyleSheet.create({
  scrollContainer: {
    flexGrow: 1,
  },
  container: {
    flex: 1,
    backgroundColor: '#1E1E2A', // Fundo escuro
    alignItems: 'center',
    justifyContent: 'center',
    padding: 20,
  },
  titulo: {
    fontSize: 30,
    color: '#FFFFFF', // Texto branco
    marginBottom: 20,
    fontWeight: 'bold',
  },
  boasVindas: {
    fontSize: 20,
    color: '#CCCCCC', // Texto cinza claro
    marginBottom: 10,
  },
  dadosContainer: {
    backgroundColor: 'rgba(255, 255, 255, 0.1)',
    padding: 15,
    borderRadius: 10,
    width: '100%',
    marginBottom: 20,
  },
  dadosTexto: {
    fontSize: 16,
    color: '#CCCCCC',
    marginBottom: 5,
  },
  input: {
    width: '100%',
    backgroundColor: '#FFFFFF',
    padding: 15,
    borderRadius: 10,
    fontSize: 18,
    marginBottom: 15,
  },
  botao: {
    backgroundColor: '#3D85C6', // Bot√£o azul
    paddingVertical: 12,
    paddingHorizontal: 25,
    borderRadius: 10,
    marginBottom: 10,
    width: '100%',
    alignItems: 'center',
  },
  botaoLimpar: {
    backgroundColor: '#C64444', // Bot√£o vermelho
    paddingVertical: 12,
    paddingHorizontal: 25,
    borderRadius: 10,
    width: '100%',
    alignItems: 'center',
  },
  textoBotao: {
    fontSize: 18,
    color: '#FFF',
    fontWeight: 'bold',
  },
});
</script> </code></pre>
        </section>

        
        <section>
          <h3>üõ†Ô∏è Exerc√≠cio em sala: Lista de Tarefas com AsyncStorage</h3>
          <p>Implemente um aplicativo simples de lista de tarefas que:</p>
          <ol>
            <li>Permita adicionar novas tarefas</li>
            <li>Marque tarefas como conclu√≠das</li>
            <li>Exclua tarefas</li>
            <li>Persista os dados usando AsyncStorage</li>
          </ol>
        </section>
        
        <section>
          <h3>üí° Dicas de Implementa√ß√£o</h3>
          <p>Estrutura de dados recomendada para as tarefas:</p>
          <pre><code class="javascript" data-trim>
    // Array de objetos para as tarefas
    const tarefas = [
      {
        id: '1', // Use uuid ou Date.now() para gerar IDs √∫nicos
        titulo: 'Comprar leite',
        concluida: false,
        dataCriacao: '2023-05-10T14:30:00Z'
      },
      {
        id: '2',
        titulo: 'Estudar React Native',
        concluida: true,
        dataCriacao: '2023-05-09T10:15:00Z'
      }
    ];

    // Chave para armazenar no AsyncStorage
    const TASKS_STORAGE_KEY = '@minhas_tarefas';
          </code></pre>
        </section>
        
        <section>
          <h3>üß© Fun√ß√µes Principais</h3>
          <pre><code class="javascript" data-trim>
    // Carregar tarefas do AsyncStorage
    const carregarTarefas = async () => {
      try {
        const tarefasSalvas = await AsyncStorage.getItem(TASKS_STORAGE_KEY);
        if (tarefasSalvas !== null) {
          setTarefas(JSON.parse(tarefasSalvas));
        }
      } catch (erro) {
        console.error('Erro ao carregar tarefas:', erro);
      }
    };

    // Salvar tarefas no AsyncStorage
    const salvarTarefas = async (novasTarefas) => {
      try {
        await AsyncStorage.setItem(TASKS_STORAGE_KEY, JSON.stringify(novasTarefas));
        setTarefas(novasTarefas);
      } catch (erro) {
        console.error('Erro ao salvar tarefas:', erro);
      }
    };
          </code></pre>
        </section>
        
        <section>
          <h3>üß© Fun√ß√µes CRUD das Tarefas</h3>
          <pre><code class="javascript" data-trim>
    // Adicionar nova tarefa
    const adicionarTarefa = (titulo) => {
      const novaTarefa = {
        id: Date.now().toString(),
        titulo,
        concluida: false,
        dataCriacao: new Date().toISOString()
      };
      const novasTarefas = [...tarefas, novaTarefa];
      salvarTarefas(novasTarefas);
    };

    // Marcar tarefa como conclu√≠da ou n√£o conclu√≠da
    const alternarConclusao = (id) => {
      const novasTarefas = tarefas.map(tarefa => 
        tarefa.id === id ? { ...tarefa, concluida: !tarefa.concluida } : tarefa
      );
      salvarTarefas(novasTarefas);
    };

    // Excluir tarefa
    const excluirTarefa = (id) => {
      const novasTarefas = tarefas.filter(tarefa => tarefa.id !== id);
      salvarTarefas(novasTarefas);
    };
          </code></pre>
        </section>
        
        <section>
          <h3>üé® Interface B√°sica</h3>
          <pre><code class="javascript" data-trim>
    return (
      <View style={styles.container}>
        <Text style={styles.titulo}>Minhas Tarefas</Text>
        
        {/* Formul√°rio para adicionar tarefas */}
        <View style={styles.inputContainer}>
          <TextInput
        style={styles.input}
        value={novaTarefa}
        onChangeText={setNovaTarefa}
        placeholder="Digite uma nova tarefa"
          />
          <TouchableOpacity 
        style={styles.botaoAdicionar} 
        onPress={() => {
          if (novaTarefa.trim() !== '') {
            adicionarTarefa(novaTarefa);
            setNovaTarefa('');
          }
        }}
          >
        <Text style={styles.textoBotao}>+</Text>
          </TouchableOpacity>
        </View>
        
        {/* Lista de tarefas */}
        <FlatList
          data={tarefas}
          keyExtractor={(item) => item.id}
          renderItem={({ item }) => (
        // Renderiza√ß√£o de cada tarefa...
          )}
        />
      </View>
    );
          </code></pre>
        </section>
        
        <section>
          <h3>üìù Renderiza√ß√£o de Cada Tarefa</h3>
          <pre><code class="javascript" data-trim>
    renderItem={({ item }) => (
      <View style={styles.itemTarefa}>
        <TouchableOpacity
          onPress={() => alternarConclusao(item.id)}
          style={styles.checkboxContainer}
        >
          <View style={[
        styles.checkbox, 
        item.concluida && styles.checkboxConcluida
          ]}>
        {item.concluida && <Text style={styles.checkmark}>‚úì</Text>}
          </View>
        </TouchableOpacity>
        
        <Text style={[
          styles.textoTarefa,
          item.concluida && styles.textoTarefaConcluida
        ]}>
          {item.titulo}
        </Text>
        
        <TouchableOpacity
          onPress={() => excluirTarefa(item.id)}
          style={styles.botaoExcluir}
        >
          <Text style={styles.textoExcluir}>üóëÔ∏è</Text>
        </TouchableOpacity>
      </View>
    )}
          </code></pre>
        </section>
        
        <section>
          <h3>üí™ Desafios Adicionais</h3>
          <p>Para quem terminar mais cedo ou quiser ir al√©m:</p>
          <ol>
            <li>Adicione edi√ß√£o de tarefas</li>
            <li>Implemente categorias para as tarefas</li>
            <li>Adicione datas de vencimento com alarmes</li>
            <li>Crie filtros para mostrar tarefas conclu√≠das/n√£o conclu√≠das</li>
            <li>Implemente a fun√ß√£o de "desfazer" ap√≥s excluir uma tarefa</li>
          </ol>
       
        </section>
          </section></code>



      <!-- SQLite -->
      <section>
        <section>
          <h2>üóÑÔ∏è SQLite no React Native</h2>
          <p>Banco de dados relacional completo integrado ao seu aplicativo</p>
          <div class="important-note">
            <p>üì± Com o Expo, usamos o expo-sqlite:</p>
            <pre><code data-trim data-noescape>
              npx expo install expo-sqlite
            </code></pre>
          </div>
        </section>

        <section>
          <h3>Por que usar SQLite?</h3>
          <ul>
            <li>üóÉÔ∏è Banco de dados relacional completo</li>
            <li>üîç Suporte a consultas SQL complexas</li>
            <li>üîÑ Transa√ß√µes ACID (Atomicidade, Consist√™ncia, Isolamento, Durabilidade)</li>
            <li>üìä Melhor desempenho para grandes volumes de dados</li>
            <li>üß© Capacidade de modelar relacionamentos entre entidades</li>
          </ul>
        </section>

        <section>
          <h3>Quando escolher SQLite vs AsyncStorage</h3>
          <div class="container">
            <div class="column">
              <h4>Use SQLite quando:</h4>
              <ul>
                <li>Dados estruturados</li>
                <li>Relacionamentos complexos</li>
                <li>Grandes volumes de dados</li>
                <li>Necessidade de consultas avan√ßadas</li>
                <li>Organiza√ß√£o por tabelas</li>
              </ul>
            </div>
            <div class="column">
              <h4>Use AsyncStorage quando:</h4>
              <ul>
                <li>Dados simples (chave-valor)</li>
                <li>Configura√ß√µes do aplicativo</li>
                <li>Tokens de autentica√ß√£o</li>
                <li>Prefer√™ncias do usu√°rio</li>
                <li>Cache tempor√°rio simples</li>
              </ul>
            </div>
          </div>
        </section>

        <section>
          <h3>Opera√ß√µes b√°sicas com SQLite</h3>
          <pre><code class="javascript" data-trim data-line-numbers="1-25" data-line="3,5-8">
            // Importando a biblioteca
            import * as SQLite from 'expo-sqlite';
            
            // Criando/abrindo um banco de dados
            const db = SQLite.openDatabase('meuapp.db');
            
            // Executando a cria√ß√£o de uma tabela
            const inicializarBancoDeDados = () => {
              db.transaction(tx => {
                tx.executeSql(
                  'CREATE TABLE IF NOT EXISTS usuarios (id INTEGER PRIMARY KEY AUTOINCREMENT, nome TEXT, email TEXT);',
                  [],
                  () => {
                    console.log('Tabela criada com sucesso');
                  },
                  (_, erro) => {
                    console.error('Erro ao criar tabela', erro);
                    return true; // Retorna true para interromper o processamento ap√≥s erro
                  }
                );
              });
            };
            
            // Chame a fun√ß√£o quando seu app iniciar
            inicializarBancoDeDados();
          </code></pre>
        </section>

        <section>
          <h3>Inserindo dados no SQLite</h3>
          <pre><code class="javascript" data-trim data-line-numbers="1-20" data-line="4-6">
            // Inserir um novo usu√°rio
            const adicionarUsuario = (nome, email, callback) => {
              db.transaction(tx => {
                tx.executeSql(
                  'INSERT INTO usuarios (nome, email) VALUES (?, ?)',
                  [nome, email], // Os valores substituir√£o os placeholders '?'
                  (_, resultSet) => {
                    // resultSet.insertId cont√©m o ID do novo registro
                    console.log(`Usuario adicionado com ID: ${resultSet.insertId}`);
                    if (callback) callback(resultSet.insertId);
                  },
                  (_, erro) => {
                    console.error('Erro ao adicionar usu√°rio', erro);
                    return true;
                  }
                );
              });
            };
            
            // Uso:
            adicionarUsuario('Maria Silva', 'maria@exemplo.com', novoId => {
              console.log(`Novo usu√°rio criado com ID: ${novoId}`);
            });
          </code></pre>
        </section>

        <section>
          <h3>Consultando dados no SQLite</h3>
          <pre><code class="javascript" data-trim data-line-numbers="1-32" data-line="4-7,13-16">
            // Buscar todos os usu√°rios
            const buscarTodosUsuarios = (callback) => {
              db.transaction(tx => {
                tx.executeSql(
                  'SELECT * FROM usuarios',
                  [],
                  (_, { rows }) => {
                    // rows._array cont√©m os resultados da consulta
                    callback(rows._array);
                  },
                  (_, erro) => {
                    console.error('Erro ao buscar usu√°rios', erro);
                    return true;
                  }
                );
              });
            };
            
            // Buscar usu√°rio por ID
            const buscarUsuarioPorId = (id, callback) => {
              db.transaction(tx => {
                tx.executeSql(
                  'SELECT * FROM usuarios WHERE id = ?',
                  [id],
                  (_, { rows }) => {
                    if (rows.length > 0) {
                      callback(rows._array[0]);
                    } else {
                      callback(null); // Usu√°rio n√£o encontrado
                    }
                  },
                  (_, erro) => {
                    console.error('Erro ao buscar usu√°rio', erro);
                    return true;
                  }
                );
              });
            };
          </code></pre>
        </section>

        <section>
          <h3>Atualizando e excluindo dados</h3>
          <pre><code class="javascript" data-trim data-line-numbers="1-32" data-line="4-6,18-20">
            // Atualizar um usu√°rio
            const atualizarUsuario = (id, nome, email, callback) => {
              db.transaction(tx => {
                tx.executeSql(
                  'UPDATE usuarios SET nome = ?, email = ? WHERE id = ?',
                  [nome, email, id],
                  (_, { rowsAffected }) => {
                    // rowsAffected indica quantos registros foram atualizados
                    if (rowsAffected > 0) {
                      console.log(`Usu√°rio ${id} atualizado com sucesso`);
                      if (callback) callback(true);
                    } else {
                      console.log('Nenhum registro foi atualizado');
                      if (callback) callback(false);
                    }
                  },
                  (_, erro) => {
                    console.error('Erro ao atualizar usu√°rio', erro);
                    return true;
                  }
                );
              });
            };
            
            // Excluir um usu√°rio
            const excluirUsuario = (id, callback) => {
              db.transaction(tx => {
                tx.executeSql(
                  'DELETE FROM usuarios WHERE id = ?',
                  [id],
                  (_, { rowsAffected }) => {
                    const sucesso = rowsAffected > 0;
                    if (sucesso) console.log(`Usu√°rio ${id} exclu√≠do com sucesso`);
                    if (callback) callback(sucesso);
                  },
                  (_, erro) => {
                    console.error('Erro ao excluir usu√°rio', erro);
                    return true;
                  }
                );
              });
            };
          </code></pre>
        </section>

        <section>
          <h3>Exemplo completo: Gerenciador de contatos</h3>
          <pre><code class="javascript" data-trim data-line-numbers="1-50">
            import React, { useState, useEffect } from 'react';
            import { View, Text, TextInput, Button, FlatList, StyleSheet } from 'react-native';
            import * as SQLite from 'expo-sqlite';
            
            // Abre ou cria o banco de dados
            const db = SQLite.openDatabase('contatos.db');
            
            export default function GerenciadorContatos() {
              const [nome, setNome] = useState('');
              const [telefone, setTelefone] = useState('');
              const [contatos, setContatos] = useState([]);
              const [contatoAtual, setContatoAtual] = useState(null);
            
              useEffect(() => {
                // Cria a tabela se n√£o existir
                db.transaction(tx => {
                  tx.executeSql(
                    'CREATE TABLE IF NOT EXISTS contatos (id INTEGER PRIMARY KEY AUTOINCREMENT, nome TEXT, telefone TEXT);'
                  );
                });
                
                // Carrega os contatos iniciais
                carregarContatos();
              }, []);
            
              const carregarContatos = () => {
                db.transaction(tx => {
                  tx.executeSql(
                    'SELECT * FROM contatos',
                    [],
                    (_, { rows }) => {
                      setContatos(rows._array);
                    }
                  );
                });
              };
            
              const salvarContato = () => {
                if (!nome || !telefone) return;
            
                db.transaction(tx => {
                  if (contatoAtual) {
                    // Atualiza contato existente
                    tx.executeSql(
                      'UPDATE contatos SET nome = ?, telefone = ? WHERE id = ?',
                      [nome, telefone, contatoAtual.id],
                      (_, result) => {
                        if (result.rowsAffected > 0) {
                          setContatoAtual(null);
                          setNome('');
                          setTelefone('');
                          carregarContatos();
                        }
                      }
                    );
                  } else {
                    // Adiciona novo contato
                    tx.executeSql(
                      'INSERT INTO contatos (nome, telefone) VALUES (?, ?)',
                      [nome, telefone],
                      (_, result) => {
                        setNome('');
                        setTelefone('');
                        carregarContatos();
                      }
                    );
                  }
                });
              };
          </code></pre>
        </section>

        <section>
          <pre><code class="javascript" data-trim data-line-numbers="1-50"><script>
              const excluirContato = (id) => {
                db.transaction(tx => {
                  tx.executeSql(
                    'DELETE FROM contatos WHERE id = ?',
                    [id],
                    (_, result) => {
                      if (result.rowsAffected > 0) {
                        carregarContatos();
                        if (contatoAtual && contatoAtual.id === id) {
                          setContatoAtual(null);
                          setNome('');
                          setTelefone('');
                        }
                      }
                    }
                  );
                });
              };
            
              const editarContato = (contato) => {
                setContatoAtual(contato);
                setNome(contato.nome);
                setTelefone(contato.telefone);
              };
            
              return (
                <View style={styles.container}>
                  <Text style={styles.titulo}>Gerenciador de Contatos</Text>
            
                  <View style={styles.formulario}>
                    <TextInput
                      style={styles.input}
                      value={nome}
                      onChangeText={setNome}
                      placeholder="Nome"
                    />
                    <TextInput
                      style={styles.input}
                      value={telefone}
                      onChangeText={setTelefone}
                      placeholder="Telefone"
                      keyboardType="phone-pad"
                    />
                    <Button
                      title={contatoAtual ? "Atualizar Contato" : "Adicionar Contato"}
                      onPress={salvarContato}
                    />
                    {contatoAtual && (
                      <Button
                        title="Cancelar"
                        color="gray"
                        onPress={() => {
                          setContatoAtual(null);
                          setNome('');
                          setTelefone('');
                        }}
                      />
                    )}
                  </View>
                </script></code></pre>
        </section>

        <section>
          <pre><code class="javascript" data-trim data-line-numbers="1-40"><script>
                  <FlatList
                    data={contatos}
                    keyExtractor={item => item.id.toString()}
                    renderItem={({ item }) => (
                      <View style={styles.itemContato}>
                        <View>
                          <Text style={styles.nomeContato}>{item.nome}</Text>
                          <Text style={styles.telefoneContato}>{item.telefone}</Text>
                        </View>
                        <View style={styles.botoesContato}>
                          <Button
                            title="Editar"
                            onPress={() => editarContato(item)}
                          />
                          <Button
                            title="Excluir"
                            color="red"
                            onPress={() => excluirContato(item.id)}
                          />
                        </View>
                      </View>
                    )}
                  />
                </View>
              );
            }
            
            const styles = StyleSheet.create({
              container: { flex: 1, padding: 20 },
              titulo: { fontSize: 24, fontWeight: 'bold', marginBottom: 20, textAlign: 'center' },
              formulario: { marginBottom: 20 },
              input: { borderWidth: 1, borderColor: '#ddd', padding: 10, marginBottom: 10, borderRadius: 5 },
              itemContato: {
                flexDirection: 'row',
                justifyContent: 'space-between',
                alignItems: 'center',
                padding: 15,
                borderBottomWidth: 1,
                borderBottomColor: '#ddd'
              },
              nomeContato: { fontSize: 18, fontWeight: 'bold' },
              telefoneContato: { color: '#666' },
              botoesContato: { flexDirection: 'row' }
            });
        </script></code></pre>
        </section>

        <section>
          <h3>üõ†Ô∏è Exerc√≠cio em sala: Adicionar categorias aos contatos</h3>
          <p>Partindo do exemplo de gerenciador de contatos:</p>
          <ol>
            <li>Adicione um campo "categoria" na tabela de contatos</li>
            <li>Permita ao usu√°rio selecionar uma categoria (pessoal, trabalho, fam√≠lia)</li>
            <li>Implemente uma fun√ß√£o de filtragem por categoria</li>
            <li>Exiba a categoria de cada contato na lista</li>
          </ol>
          <p><strong>Tempo:</strong> 25-30 minutos</p>
        </section>
      </section>

      <!-- Melhores pr√°ticas -->
      <section>
        <h2>üëå Melhores Pr√°ticas</h2>
        <ul>
          <li><strong>Estrutura de dados:</strong> Escolha o formato mais adequado para os dados</li>
          <li><strong>Tratamento de erros:</strong> Sempre implemente try/catch em opera√ß√µes ass√≠ncronas</li>
          <li><strong>Desempenho:</strong> Minimize o n√∫mero de opera√ß√µes de leitura/escrita</li>
          <li><strong>Transa√ß√µes:</strong> Use transa√ß√µes no SQLite para opera√ß√µes complexas</li>
          <li><strong>Seguran√ßa:</strong> N√£o armazene dados sens√≠veis em texto puro</li>
          <li><strong>Migrations:</strong> Implemente estrat√©gias para atualiza√ß√µes de schema</li>
          <li><strong>Modulariza√ß√£o:</strong> Encapsule as opera√ß√µes de banco de dados em servi√ßos</li>
        </ul>
      </section>

      <!-- Exerc√≠cio final -->
      <section>
        <h2>üè† Exerc√≠cio para Casa</h2>
        <p>Desenvolva um aplicativo de Gerenciamento de Despesas que:</p>
        <ol>
          <li>Use SQLite para armazenar despesas com: valor, descri√ß√£o, data e categoria</li>
          <li>Implemente as opera√ß√µes CRUD completas (criar, ler, atualizar, deletar)</li>
          <li>Permita filtrar despesas por categoria e per√≠odo</li>
          <li>Exiba um resumo com o valor total das despesas</li>
          <li>Use AsyncStorage para armazenar as prefer√™ncias do usu√°rio (como moeda preferida)</li>
        </ol>
      
      </section>

      <!-- Refer√™ncias -->
      <section>
        <h2>üìö Refer√™ncias</h2>
        <ul>
          <li><a href="https://react-native-async-storage.github.io/async-storage/" target="_blank">Documenta√ß√£o oficial do AsyncStorage</a></li>
          <li><a href="https://docs.expo.dev/versions/latest/sdk/sqlite/" target="_blank">Documenta√ß√£o do expo-sqlite</a></li>
          <li><a href="https://www.sqlite.org/docs.html" target="_blank">Documenta√ß√£o SQLite</a></li>
          <li><a href="https://reactnative.dev/docs/security" target="_blank">Seguran√ßa no React Native</a></li>
        </ul>
      </section>

      <!-- Slide final -->
      <section>
        <h2>Obrigado!</h2>
        <p>D√∫vidas?</p>
        <p>
          <a href="https://www.linkedin.com/in/diogo-francisco-borba-rodrigues-3a1b5179/" target="_blank">
            <i class="fab fa-linkedin"></i> LinkedIn
          </a>
          &nbsp;|&nbsp;
          <a href="https://github.com/DIOGOBRODRIGUES" target="_blank">
            <i class="fab fa-github"></i> GitHub
          </a>
        </p>
      </section>

   </div>
  </div>

  
  <script src="../../../reveal.js-master/dist/reveal.js"></script>
  <script src="../../../reveal.js-master/plugin/zoom/zoom.js"></script>
  <script src="../../../reveal.js-master/plugin/notes/notes.js"></script>
  <script src="../../../reveal.js-master/plugin/search/search.js"></script>
  <script src="../../../reveal.js-master/plugin/markdown/markdown.js"></script>
  <script src="../../../reveal.js-master/plugin/highlight/highlight.js"></script>
  <script>
    Reveal.initialize({
      controls: true,
      progress: true,
      center: true,
      hash: true,
      slideNumber: true ,
      plugins: [RevealZoom, RevealNotes, RevealSearch, RevealMarkdown, RevealHighlight]
    });
  </script>
</body>

</html>
