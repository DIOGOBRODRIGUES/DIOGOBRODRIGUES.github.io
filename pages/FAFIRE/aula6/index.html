<!doctype html>
<html lang="pt-BR">

<head>
  <meta charset="utf-8">
  <title>Aula 6: Sensores de Localiza√ß√£o e APIs de Mapas com React Native</title>

  <meta name="description" content="Aula sobre implementa√ß√£o de sensores de localiza√ß√£o e APIs de mapas em aplicativos utilizando React Native e Expo">
  <meta name="author" content="Prof. Dr. Diogo Francisco Borba Rodrigues">

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="../../../reveal.js-master/dist/reset.css">
  <link rel="stylesheet" href="../../../reveal.js-master/dist/reveal.css">
  <link rel="stylesheet" href="../../../reveal.js-master/dist/theme/dracula.css" id="theme">

  <!-- Syntax Highlighting -->
  <!-- <link rel="stylesheet" href="plugin/highlight/monokai.css"> -->
  <link rel="stylesheet" href="../../../reveal.js-master/plugin/highlight/monokai.css">

  <style>
    .fafire-green {
      color: #4CAF50;
    }
    .code-example {
      font-size: 0.8em;
      width: 90%;
      margin: 0 auto;
    }
    .two-columns {
      display: flex;
      justify-content: space-between;
    }
    .column {
      width: 48%;
    }
  </style>

</head>

<body>
 
  <div class="reveal">
    <div class="slides">
      <!-- Slide 1 - T√≠tulo da Aula -->
      <section>
         <p><span class="farire-logo">üå≥</span> FAFIRE - P√≥s-gradua√ß√£o em Engenharia de Software</p>
        <h2><span class="fafire-green">Aula 6:</span> Sensores de Localiza√ß√£o e APIs de Mapas com React Native</h2>
        <p>P√≥s-Gradua√ß√£o em Engenharia de Software</p>
        <p>Prof. Dr. Diogo Francisco Borba Rodrigues</p>
        <a href="https://www.linkedin.com/in/diogo-francisco-borba-rodrigues-3a1b5179/" target="_blank">
          <i class="fab fa-linkedin"></i>
        </a>
        <a href="https://github.com/DIOGOBRODRIGUES" target="_blank">
          <i class="fab fa-github"></i>
        </a>
      </section>

      <!-- Slide 2 - Objetivos da Aula -->
      <section>
        <h2>Objetivos</h2>
        <ul>
          <li>Compreender os conceitos fundamentais sobre sensores de localiza√ß√£o</li>
          <li>Conhecer as APIs de geolocaliza√ß√£o dispon√≠veis para React Native</li>
          <li>Aprender a implementar recursos de localiza√ß√£o e mapas com Expo</li>
          <li>Explorar casos de uso e boas pr√°ticas em aplica√ß√µes reais</li>
        </ul>
      </section>

      <!-- Slide 4 - Fundamentos de Geolocaliza√ß√£o -->
      <section>
        <section>
          <h2>Fundamentos de Geolocaliza√ß√£o</h2>
          <p>Princ√≠pios b√°sicos que norteiam os sistemas de localiza√ß√£o</p>
        </section>
        
        <section>
          <h3>Sistema de Coordenadas</h3>
          <ul>
            <li>Latitude: dist√¢ncia angular norte/sul do equador (-90¬∞ a 90¬∞)</li>
            <li>Longitude: dist√¢ncia angular leste/oeste do meridiano principal (-180¬∞ a 180¬∞)</li>
            <li>Altitude: dist√¢ncia vertical acima do n√≠vel do mar</li>
          </ul>
          <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/62/Latitude_and_Longitude_of_the_Earth.svg/600px-Latitude_and_Longitude_of_the_Earth.svg.png" alt="Sistema de Coordenadas" style="height: 250px; border: none; box-shadow: none;">
        </section>

        <section>
          <h3>Tecnologias de Localiza√ß√£o</h3>
          <ul>
            <li><strong>GPS (Global Positioning System)</strong>: Localiza√ß√£o por sat√©lite</li>
            <li><strong>Wi-Fi Positioning</strong>: Triangula√ß√£o baseada em redes Wi-Fi</li>
            <li><strong>Cellular Network</strong>: Triangula√ß√£o baseada em torres de celular</li>
            <li><strong>Bluetooth Beacons</strong>: Localiza√ß√£o em espa√ßos internos</li>
          </ul>
        </section>

        <section>
          <h3>Precis√£o e Acur√°cia</h3>
          <ul>
            <li><strong>Precis√£o</strong>: Qu√£o refinada √© a medi√ß√£o (metros, cent√≠metros)</li>
            <li><strong>Acur√°cia</strong>: Qu√£o pr√≥ximo est√° do valor real</li>
            <li><strong>Fatores que afetam</strong>: Ambiente urbano, clima, quantidade de sat√©lites vis√≠veis</li>
          </ul>
          <p>GPS t√≠pico: precis√£o de 3-5 metros em √°reas abertas</p>
        </section>
      </section>

      <!-- Slide 5 - Sensores em Dispositivos M√≥veis -->
      <section>
        <section>
          <h2>Sensores em Dispositivos M√≥veis</h2>
          <p>Hardware que possibilita a detec√ß√£o de localiza√ß√£o e movimento</p>
        </section>

        <section>
          <h3>Tipos de Sensores</h3>
          <ul>
            <li><strong>Receptor GPS</strong>: Captura sinais de sat√©lites para determinar posi√ß√£o</li>
            <li><strong>Aceler√¥metro</strong>: Detecta mudan√ßas de velocidade e dire√ß√£o</li>
            <li><strong>Girosc√≥pio</strong>: Mede rota√ß√£o e orienta√ß√£o</li>
            <li><strong>Magnet√¥metro</strong>: Atua como b√∫ssola digital</li>
            <li><strong>Bar√¥metro</strong>: Estima altitude atrav√©s da press√£o atmosf√©rica</li>
          </ul>
        </section>

        <section>
          <h3>Fus√£o de Sensores</h3>
          <p>A combina√ß√£o de dados de m√∫ltiplos sensores proporciona:</p>
          <ul>
            <li>Maior precis√£o na localiza√ß√£o</li>
            <li>Redu√ß√£o de consumo de bateria</li>
            <li>Localiza√ß√£o em ambientes internos onde GPS falha</li>
            <li>Detec√ß√£o de contexto (andando, dirigindo, parado)</li>
          </ul>
        </section>
      </section>

      <!-- Slide 6 - React Native e Expo -->
      <section>
  

        <section>
          <h3>Expo Location API</h3>
          <p>Fornece interface para acessar dados de localiza√ß√£o do dispositivo</p>
          <pre><code class="javascript">import * as Location from 'expo-location';

// Solicitar permiss√µes
const { status } = await Location.requestForegroundPermissionsAsync();

// Obter localiza√ß√£o atual
const location = await Location.getCurrentPositionAsync({});
console.log(location.coords.latitude, location.coords.longitude);</code></pre>
        </section>
      </section>

      <!-- Slide 7 - APIs de Mapas -->
      <section>
        <section>
          <h2>APIs de Mapas</h2>
          <p>Servi√ßos para visualiza√ß√£o e intera√ß√£o com dados geoespaciais</p>
        </section>

        <section>
          <h3>Google Maps</h3>
          <ul>
            <li>API mais popular para integra√ß√£o de mapas</li>
            <li>Ampla cobertura global e dados detalhados</li>
            <li>Servi√ßos adicionais: rotas, geocodifica√ß√£o, lugares</li>
            <li>Quota gratuita limitada, requer chave API</li>
          </ul>
        </section>

        <section>
          <h3>Mapbox</h3>
          <ul>
            <li>Alternativa ao Google Maps com maior personaliza√ß√£o</li>
            <li>Foco em mapas personaliz√°veis e design</li>
            <li>SDK espec√≠fico para React Native</li>
            <li>Modelo de pre√ßos baseado em carregamento de mapa</li>
          </ul>
        </section>

        <section>
          <h3>OpenStreetMap</h3>
          <ul>
            <li>Projeto colaborativo de mapeamento global de c√≥digo aberto</li>
            <li>Dados gratuitos mantidos pela comunidade</li>
            <li>Pode ser integrado atrav√©s de v√°rias bibliotecas</li>
            <li>Menos recursos avan√ßados, mas sem custo direto</li>
          </ul>
        </section>

        <section>
          <h3>Comparativo de APIs</h3>
          <table>
            <thead>
              <tr>
                <th>Caracter√≠stica</th>
                <th>Google Maps</th>
                <th>Mapbox</th>
                <th>OpenStreetMap</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Precis√£o dos dados</td>
                <td>Alta</td>
                <td>Alta</td>
                <td>Vari√°vel</td>
              </tr>
              <tr>
                <td>Customiza√ß√£o</td>
                <td>M√©dia</td>
                <td>Alta</td>
                <td>Alta</td>
              </tr>
              <tr>
                <td>Pre√ßo</td>
                <td>$$</td>
                <td>$</td>
                <td>Gratuito</td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>

      <!-- Slide 8 - Implementa√ß√£o Pr√°tica com React Native e Expo -->
      <section>
        <section>
          <h2>Implementa√ß√£o Pr√°tica</h2>
          <p>Construindo aplicativo com recursos de localiza√ß√£o</p>
        </section>

        <section>
          <h3>Configura√ß√£o do Projeto</h3>
          <pre><code class="bash"># Criar projeto com Expo
npx create-expo-app geo-app
cd geo-app

# Instalar depend√™ncias necess√°rias
npx expo install expo-location
npx expo install react-native-maps
npx expo install expo-task-manager</code></pre>
        </section>

        <section>
          <h3>Solicitando Permiss√µes</h3>
          <pre><code class="javascript"><script>import React, { useEffect, useState } from 'react';
import { StyleSheet, View, Text, ActivityIndicator, Alert } from 'react-native';
import MapView, { Marker } from 'react-native-maps'; // Componente de mapa e marcador
import * as Location from 'expo-location'; // Biblioteca Expo para localiza√ß√£o

export default function App() {
  // Estado para armazenar a localiza√ß√£o obtida
  const [location, setLocation] = useState(null);
  // Estado para mensagem de erro
  const [errorMsg, setErrorMsg] = useState('');
  // Estado para controle de carregamento
  const [loading, setLoading] = useState(true);

  // useEffect executa uma √∫nica vez ao montar o componente
  useEffect(() => {
    (async () => {
      // 1. Solicita permiss√£o de acesso √† localiza√ß√£o em primeiro plano
      const { status } = await Location.requestForegroundPermissionsAsync();

      // 2. Se a permiss√£o for negada...
      if (status !== 'granted') {
        setErrorMsg('Permiss√£o de localiza√ß√£o negada');
        Alert.alert('Erro', 'Permiss√£o de localiza√ß√£o foi negada');
        setLoading(false); // Desliga o estado de carregamento
        return; // Sai da fun√ß√£o para n√£o continuar
      }

      // 3. Se permitida, obt√©m a localiza√ß√£o atual do dispositivo
      const currentLocation = await Location.getCurrentPositionAsync({});
      setLocation(currentLocation); // Grava nos dados de estado
      setLoading(false); // Finaliza o loading
    })();
  }, []); // Array vazio garante execu√ß√£o apenas na montagem

  // 4. Enquanto estiver carregando, exibe o spinner
  if (loading) {
    return (
      <View style={styles.loadingContainer}>
        <ActivityIndicator size="large" color="#007AFF" />
        <Text style={styles.loadingText}>Carregando localiza√ß√£o...</Text>
      </View>
    );
  }

  // 5. Se n√£o h√° localiza√ß√£o (mas j√° terminou o loading), exibe erro
  if (!location) {
    return (
      <View style={styles.loadingContainer}>
        <Text style={styles.errorText}>{errorMsg || 'Erro desconhecido.'}</Text>
      </View>
    );
  }

  // 6. Desestrutura latitude e longitude da localiza√ß√£o obtida
  const { latitude, longitude } = location.coords;

  // 7. Renderiza√ß√£o principal: mapa + coordenadas textuais
  return (
    <View style={styles.container}>
      {/* Mapa centralizado na posi√ß√£o do usu√°rio */}
      <MapView
        style={styles.map}
        showsUserLocation // Mostra o ponto azul nativo
        initialRegion={{
          latitude,
          longitude,
          latitudeDelta: 0.005, // Zoom vertical
          longitudeDelta: 0.005, // Zoom horizontal
        }}
      >
        {/* Marcador no ponto atual */}
        <Marker
          coordinate={{ latitude, longitude }}
          title="Voc√™ est√° aqui"
        />
      </MapView>

  
    </View>
  );
}

// Estilos aplicados aos componentes
const styles = StyleSheet.create({
  container: {
    flex: 1, // Preenche toda a tela
  },
  map: {
    flex: 1, // Mapa preenche o espa√ßo dispon√≠vel
  },
  coordinatesBox: {
    padding: 16,
    backgroundColor: '#FFF',
    borderTopWidth: 1,
    borderColor: '#E0E0E0',
  },
  coordText: {
    fontSize: 16,
    color: '#333',
    textAlign: 'center',
    marginBottom: 4,
  },
  loadingContainer: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    backgroundColor: '#F2F2F7', // Fundo neutro iOS
  },
  loadingText: {
    marginTop: 12,
    fontSize: 16,
    color: '#444',
  },
  errorText: {
    fontSize: 18,
    color: 'red',
    textAlign: 'center',
    padding: 20,
  },
});</script></code></pre>
        </section>
      </section>

      <!-- Slide 9 - Aplica√ß√µes Avan√ßadas -->
      <section>
        <section>
          <h2>Aplica√ß√µes Avan√ßadas</h2>
          <p>Recursos adicionais para enriquecer a experi√™ncia do usu√°rio</p>
        </section>

        <section>
          <h3>Monitoramento de Localiza√ß√£o em Segundo Plano</h3>
          <pre><code class="javascript">import * as TaskManager from 'expo-task-manager';
import * as Location from 'expo-location';

const LOCATION_TRACKING = 'location-tracking';

TaskManager.defineTask(LOCATION_TRACKING, async ({ data, error }) => {
  if (error) {
    console.error(error);
    return;
  }
  if (data) {
    const { locations } = data;
    // Processar localiza√ß√£o recebida
    console.log('Localiza√ß√£o em segundo plano:', locations);
  }
});

// Para iniciar o monitoramento:
async function startLocationTracking() {
  await Location.startLocationUpdatesAsync(LOCATION_TRACKING, {
    accuracy: Location.Accuracy.Balanced,
    timeInterval: 5000,
    distanceInterval: 10,
  });
}</code></pre>
        </section>

        <section>
          <h3>Geocodifica√ß√£o: Convers√£o entre Endere√ßos e Coordenadas</h3>
          <pre><code class="javascript">import * as Location from 'expo-location';

// Converter endere√ßo para coordenadas
async function geocodeAddress(address) {
  const result = await Location.geocodeAsync(address);
  console.log('Coordenadas:', result);
  return result;
}

// Converter coordenadas para endere√ßo
async function reverseGeocode(latitude, longitude) {
  const result = await Location.reverseGeocodeAsync({
    latitude,
    longitude
  });
  console.log('Endere√ßo:', result);
  return result;
}</code></pre>
        </section>

        <section>
          <h3>C√°lculo de Dist√¢ncia entre Pontos</h3>
          <pre><code class="javascript">function calcularDistancia(lat1, lon1, lat2, lon2) {
  // Raio da Terra em quil√¥metros
  const R = 6371;
  
  // Converter para radianos
  const dLat = toRad(lat2 - lat1);
  const dLon = toRad(lon2 - lon1);
  
  // F√≥rmula de Haversine
  const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
            Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) * 
            Math.sin(dLon/2) * Math.sin(dLon/2);
  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
  const d = R * c; // Dist√¢ncia em km
  
  return d;
}

function toRad(value) {
  return value * Math.PI / 180;
}</code></pre>
        </section>
      </section>

      <!-- Slide 10 - Boas Pr√°ticas -->
      <section>
        <h2>Boas Pr√°ticas</h2>
        <ul>
          <li><strong>Permiss√µes</strong>: Solicite apenas quando necess√°rio e explique o motivo</li>
          <li><strong>Bateria</strong>: Ajuste a precis√£o conforme o caso de uso</li>
          <li><strong>Privacidade</strong>: Seja transparente sobre coleta de dados de localiza√ß√£o</li>
          <li><strong>Experi√™ncia</strong>: Forne√ßa feedback visual quando aguardando localiza√ß√£o</li>
          <li><strong>Fallback</strong>: Tenha estrat√©gia para quando a localiza√ß√£o n√£o estiver dispon√≠vel</li>
          <li><strong>Cache</strong>: Armazene dados de localiza√ß√£o para reduzir requisi√ß√µes</li>
          <li><strong>Throttling</strong>: Limite a frequ√™ncia de atualiza√ß√µes de localiza√ß√£o</li>
        </ul>
      </section>

      <!-- Slide 11 - Considera√ß√µes de Performance -->
      <section>
        <section>
          <h2>Considera√ß√µes de Performance</h2>
          <p>Otimizando recursos de localiza√ß√£o em aplica√ß√µes m√≥veis</p>
        </section>

        <section>
          <h3>Consumo de Bateria</h3>
          <div class="two-columns">
            <div class="column">
              <p><strong>Alto Consumo:</strong></p>
              <ul>
                <li>GPS cont√≠nuo</li>
                <li>Alta precis√£o</li>
                <li>Atualiza√ß√µes frequentes</li>
              </ul>
            </div>
            <div class="column">
              <p><strong>Otimiza√ß√µes:</strong></p>
              <ul>
                <li>Ajustar precis√£o (Location.Accuracy)</li>
                <li>Aumentar intervalo entre atualiza√ß√µes</li>
                <li>Usar Wi-Fi quando poss√≠vel</li>
              </ul>
            </div>
          </div>
        </section>

        <section>
          <h3>Ajustes de Precis√£o</h3>
          <pre><code class="javascript">// Alta precis√£o (maior consumo de bateria)
const options = { accuracy: Location.Accuracy.Highest };

// Precis√£o moderada (equil√≠brio)
const options = { accuracy: Location.Accuracy.Balanced };

// Baixa precis√£o (menor consumo)
const options = { accuracy: Location.Accuracy.Lowest };

await Location.getCurrentPositionAsync(options);</code></pre>
        </section>
      </section>

      <!-- Slide 12 - Desafios em Produ√ß√£o -->
      <section>
        <h2>Desafios em Produ√ß√£o</h2>
        <ul>
          <li><strong>Varia√ß√£o entre dispositivos</strong>: Qualidade dos sensores difere entre modelos</li>
          <li><strong>Ambiente urbano</strong>: Edif√≠cios altos afetam precis√£o do GPS</li>
          <li><strong>Compatibilidade</strong>: Diferentes implementa√ß√µes entre Android e iOS</li>
          <li><strong>Mudan√ßas de pol√≠tica</strong>: Atualiza√ß√µes de SO podem alterar regras de permiss√£o</li>
          <li><strong>Custos API</strong>: Monitorar uso de APIs pagas (Google Maps, Mapbox)</li>
          <li><strong>Conex√£o de rede</strong>: Lidar com dados offline ou baixa conectividade</li>
        </ul>
      </section>

      <!-- Slide 13 - Exemplos de Aplica√ß√µes -->
      <section>
        <h2>Exemplos de Aplica√ß√µes</h2>
        <ul>
          <li><strong>Transporte e log√≠stica</strong>: Rastreamento de ve√≠culos, rotas otimizadas</li>
          <li><strong>Fitness e sa√∫de</strong>: Registro de corridas, caminhadas e exerc√≠cios</li>
          <li><strong>Redes sociais</strong>: Check-ins, compartilhamento de localiza√ß√£o</li>
          <li><strong>Com√©rcio</strong>: Lojas pr√≥ximas, entrega baseada em localiza√ß√£o</li>
          <li><strong>Turismo</strong>: Guias de viagem baseados em localiza√ß√£o, pontos de interesse</li>
          <li><strong>Seguran√ßa</strong>: Alertas de emerg√™ncia, monitoramento</li>
        </ul>
      </section>

      <!-- Slide 14 - Exerc√≠cio Pr√°tico -->
      <section>
        <h2>Exerc√≠cio Pr√°tico</h2>
        <p>Desenvolver um aplicativo que:</p>
        <ol>
          <li>Obtenha a localiza√ß√£o atual do usu√°rio</li>
          <li>Exiba um mapa centrado na posi√ß√£o do usu√°rio</li>
          <li>Permita marcar pontos de interesse no mapa</li>
          <li>Calcule a dist√¢ncia entre o usu√°rio e os pontos marcados</li>
          <li>Armazene hist√≥rico das localiza√ß√µes visitadas</li>
        </ol>
        
      </section>

      <!-- Slide 15 - Refer√™ncias -->
      <section>
        <h2>Refer√™ncias</h2>
        <ul style="font-size: 0.8em;">
          <li>Documenta√ß√£o do Expo Location: <a href="https://docs.expo.dev/versions/latest/sdk/location/">https://docs.expo.dev/versions/latest/sdk/location/</a></li>
          <li>React Native Maps: <a href="https://github.com/react-native-maps/react-native-maps">https://github.com/react-native-maps/react-native-maps</a></li>
          <li>Google Maps Platform: <a href="https://developers.google.com/maps">https://developers.google.com/maps</a></li>
          <li>Mapbox GL: <a href="https://docs.mapbox.com/help/tutorials/use-mapbox-gl-js-with-react/">https://docs.mapbox.com/help/tutorials/use-mapbox-gl-js-with-react/</a></li>
        </ul>
      </section>

      <!-- Slide 16 - Contato e D√∫vidas -->
      <section>
        <h2>Contato e D√∫vidas</h2>
        <p>Prof. Dr. Diogo Francisco Borba Rodrigues</p>
        <div>
          <a href="https://www.linkedin.com/in/diogo-francisco-borba-rodrigues-3a1b5179/" target="_blank">
            <i class="fab fa-linkedin fa-2x"></i>
          </a>
          &nbsp;&nbsp;&nbsp;
          <a href="https://github.com/DIOGOBRODRIGUES" target="_blank">
            <i class="fab fa-github fa-2x"></i>
          </a>
        </div>
        <p style="margin-top: 40px;">D√∫vidas? Coment√°rios?</p>
      </section>
   </div>
  </div>

  
  <script src="../../../reveal.js-master/dist/reveal.js"></script>
  <script src="../../../reveal.js-master/plugin/zoom/zoom.js"></script>
  <script src="../../../reveal.js-master/plugin/zoom/zoom.js"></script>
  <script src="../../../reveal.js-master/plugin/notes/notes.js"></script>
  <script src="../../../reveal.js-master/plugin/search/search.js"></script>
  <script src="../../../reveal.js-master/plugin/markdown/markdown.js"></script>
  <script src="../../../reveal.js-master/plugin/highlight/highlight.js"></script>
  <script>
    Reveal.initialize({
      controls: true,
      progress: true,
      center: true,
      hash: true,
      slideNumber: true,
      plugins: [RevealZoom, RevealNotes, RevealSearch, RevealMarkdown, RevealHighlight]
    });
  </script>
</body>

</html>