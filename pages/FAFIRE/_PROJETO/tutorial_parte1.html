<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tutorial App Agricultura Familiar - Parte 1: Fundamentos</title>
    
    <!-- Prism.js CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-radius: 15px;
            overflow: hidden;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        .header {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 2rem;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .header .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .nav-parts {
            background: #f8f9fa;
            padding: 1rem;
            text-align: center;
            border-bottom: 1px solid #e9ecef;
        }
        
        .nav-parts a {
            display: inline-block;
            margin: 0 10px;
            padding: 8px 16px;
            background: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 20px;
            transition: background 0.3s;
        }
        
        .nav-parts a:hover {
            background: #0056b3;
        }
        
        .nav-parts a.current {
            background: #28a745;
        }
        
        .content {
            padding: 2rem;
        }
        
        h1, h2, h3, h4 {
            color: #2c3e50;
            margin-top: 2rem;
            margin-bottom: 1rem;
        }
        
        h1 { font-size: 2rem; }
        h2 { font-size: 1.7rem; }
        h3 { font-size: 1.4rem; }
        h4 { font-size: 1.2rem; }
        
        p {
            margin-bottom: 1rem;
            text-align: justify;
        }
        
        ul, ol {
            margin-left: 2rem;
            margin-bottom: 1rem;
        }
        
        li {
            margin-bottom: 0.5rem;
        }
        
        .highlight-box {
            background: #e8f4fd;
            border-left: 4px solid #2196F3;
            padding: 1rem;
            margin: 1.5rem 0;
            border-radius: 4px;
        }
        
        .highlight-box h4 {
            color: #1976D2;
            margin-top: 0;
        }
        
        pre {
            margin: 1.5rem 0;
            border-radius: 8px;
            overflow-x: auto;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        code {
            font-family: 'Fira Code', 'Monaco', 'Cascadia Code', monospace;
            font-size: 0.9rem;
        }
        
        .concept-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .concept-card {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid #28a745;
        }
        
        .concept-card h4 {
            color: #28a745;
            margin-top: 0;
            margin-bottom: 1rem;
        }
        
        .emoji {
            font-size: 1.2em;
            margin-right: 0.5rem;
        }
        
        .next-part {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 1.5rem;
            margin-top: 2rem;
            border-radius: 8px;
            text-align: center;
        }
        
        .next-part a {
            color: white;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .content {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><span class="emoji">üì±</span>Tutorial: App de Agricultura Familiar</h1>
            <div class="subtitle">Parte 1: Fundamentos e Contextos</div>
        </div>
        
        <div class="nav-parts">
            <a href="tutorial_parte1.html" class="current">Parte 1: Fundamentos</a>
            <a href="tutorial_parte2.html">Parte 2: Telas</a>
            <a href="tutorial_parte3.html">Parte 3: App Principal</a>
        </div>
        
        <div class="content">
            <h1><span class="emoji">üéØ</span>O que voc√™ vai construir</h1>
            <p>Um aplicativo completo com:</p>
            <ul>
                <li>‚úÖ Sistema de autentica√ß√£o (Login/Cadastro)</li>
                <li>‚úÖ Lista de produtos agr√≠colas</li>
                <li>‚úÖ Busca de produtos</li>
                <li>‚úÖ Carrinho de compras</li>
                <li>‚úÖ Detalhes do produto com coment√°rios</li>
                <li>‚úÖ Mapa com feiras locais</li>
                <li>‚úÖ Previs√£o do tempo</li>
                <li>‚úÖ Navega√ß√£o por abas</li>
            </ul>

            <h1><span class="emoji">üìö</span>Conceitos Fundamentais</h1>
            <p>Antes de mergulharmos no c√≥digo, √© importante entender alguns conceitos que vamos usar:</p>

            <div class="concept-grid">
                <div class="concept-card">
                    <h4><span class="emoji">üß©</span>Componentes e JSX</h4>
                    <ul>
                        <li><strong>Componente:</strong> Uma fun√ß√£o que retorna elementos visuais (como uma "pe√ßa de LEGO")</li>
                        <li><strong>JSX:</strong> Sintaxe que mistura JavaScript com HTML <code>&lt;Text&gt;Ol√°&lt;/Text&gt;</code></li>
                        <li><strong>Props:</strong> Dados que passamos de um componente pai para filho</li>
                    </ul>
                </div>

                <div class="concept-card">
                    <h4><span class="emoji">üîÑ</span>Hooks do React</h4>
                    <ul>
                        <li><strong>useState():</strong> Guarda e atualiza dados que podem mudar</li>
                        <li><strong>useEffect():</strong> Executa c√≥digo quando algo acontece</li>
                        <li><strong>useContext():</strong> Acessa dados "globais" que v√°rios componentes precisam</li>
                    </ul>
                </div>

                <div class="concept-card">
                    <h4><span class="emoji">üóÉÔ∏è</span>Context API</h4>
                    <ul>
                        <li>Sistema para compartilhar dados entre componentes distantes</li>
                        <li>Como uma "vari√°vel global" que todos podem acessar</li>
                        <li>Evita passar props por muitos n√≠veis</li>
                    </ul>
                </div>

                <div class="concept-card">
                    <h4><span class="emoji">üß≠</span>Navega√ß√£o</h4>
                    <ul>
                        <li><strong>Stack:</strong> Telas empilhadas (uma sobre a outra)</li>
                        <li><strong>Tabs:</strong> Abas na parte inferior para trocar rapidamente</li>
                        <li><strong>Navigation:</strong> Objeto que controla qual tela mostrar</li>
                    </ul>
                </div>

                <div class="concept-card">
                    <h4><span class="emoji">üíæ</span>AsyncStorage</h4>
                    <ul>
                        <li>"Banco de dados" simples do celular</li>
                        <li>Salva dados que persistem mesmo fechando o app</li>
                        <li>Funciona com chaves e valores (como um dicion√°rio)</li>
                    </ul>
                </div>

                <div class="concept-card">
                    <h4><span class="emoji">üåê</span>Opera√ß√µes Ass√≠ncronas</h4>
                    <ul>
                        <li><strong>async/await:</strong> Espera opera√ß√µes que demoram</li>
                        <li><strong>Promise:</strong> Representa uma opera√ß√£o que pode dar certo ou errado</li>
                        <li><strong>then/catch:</strong> Forma alternativa de lidar com opera√ß√µes ass√≠ncronas</li>
                    </ul>
                </div>
            </div>

            <h1><span class="emoji">üõ†Ô∏è</span>Configura√ß√£o Inicial</h1>
            <div class="highlight-box">
                <h4><span class="emoji">üí°</span>Dica importante</h4>
                <p>Vamos usar a Context API para gerenciar estados globais como autentica√ß√£o e carrinho. Isso nos permite acessar esses dados de qualquer lugar no app sem "prop drilling".</p>
            </div>

            <h2><span class="emoji">üîê</span>Passo 1: Contexto de Autentica√ß√£o</h2>
            <p>Na pasta <code>context/</code>, crie o arquivo <code>AuthContext.js</code>:</p>

<pre><code class="language-javascript">// context/AuthContext.js
import React, { createContext, useState, useEffect } from 'react';
import AsyncStorage from '@react-native-async-storage/async-storage';

// Cria o contexto que ser√° usado pelos componentes
export const AuthContext = createContext({});

export function AuthProvider({ children }) {
  // Estado que controla se o usu√°rio est√° logado
  const [isLoggedIn, setIsLoggedIn] = useState(false);
  
  // Estado para mostrar loading durante verifica√ß√£o
  const [loading, setLoading] = useState(true);
  
  // Estado que guarda dados do usu√°rio logado
  const [user, setUser] = useState(null);

  // useEffect roda uma vez quando o componente monta
  // Verifica se existe usu√°rio salvo no AsyncStorage
  useEffect(() => {
    checkLoginStatus();
  }, []);

  // Fun√ß√£o que verifica se h√° usu√°rio logado
  const checkLoginStatus = async () => {
    try {
      // Busca dados salvos no "storage" do celular
      const userData = await AsyncStorage.getItem('userData');
      
      if (userData) {
        // Se existir, converte de JSON para objeto
        const user = JSON.parse(userData);
        setUser(user);
        setIsLoggedIn(true);
      }
    } catch (error) {
      console.log('Erro ao verificar login:', error);
    } finally {
      // Sempre remove o loading no final
      setLoading(false);
    }
  };

  // Fun√ß√£o para fazer login
  const login = async (userData) => {
    try {
      // Salva dados do usu√°rio no AsyncStorage
      await AsyncStorage.setItem('userData', JSON.stringify(userData));
      
      // Atualiza os estados
      setUser(userData);
      setIsLoggedIn(true);
      
      return { success: true };
    } catch (error) {
      console.log('Erro ao fazer login:', error);
      return { success: false, error: 'Erro interno' };
    }
  };

  // Fun√ß√£o para fazer logout
  const logout = async () => {
    try {
      // Remove dados do AsyncStorage
      await AsyncStorage.removeItem('userData');
      
      // Reseta os estados
      setUser(null);
      setIsLoggedIn(false);
      
      return { success: true };
    } catch (error) {
      console.log('Erro ao fazer logout:', error);
      return { success: false };
    }
  };

  // Objeto com todas as fun√ß√µes e dados que queremos compartilhar
  const contextValue = {
    isLoggedIn,
    user,
    loading,
    login,
    logout,
  };

  // Provider disponibiliza o contexto para componentes filhos
  return (
    &lt;AuthContext.Provider value={contextValue}&gt;
      {children}
    &lt;/AuthContext.Provider&gt;
  );
}</code></pre>

            <div class="highlight-box">
                <h4><span class="emoji">üìö</span>Explica√ß√µes importantes</h4>
                <p><strong>üîπ createContext():</strong> Cria um "canal de comunica√ß√£o" entre componentes.</p>
                <p><strong>üîπ Provider:</strong> Componente que "fornece" os dados para todos os filhos.</p>
                <p><strong>üîπ AsyncStorage:</strong> Banco de dados local do React Native. Os dados persistem mesmo fechando o app.</p>
                <p><strong>üîπ JSON.stringify/parse:</strong> Converte objeto para texto e vice-versa (AsyncStorage s√≥ aceita strings).</p>
            </div>

            <h2><span class="emoji">üõí</span>Passo 2: Contexto do Carrinho</h2>
            <p>Na pasta <code>context/</code>, crie o arquivo <code>CartContext.js</code>:</p>

<pre><code class="language-javascript">// context/CartContext.js
import React, { createContext, useState, useContext } from 'react';

// Cria o contexto do carrinho
export const CartContext = createContext({});

export function CartProvider({ children }) {
  // Estado que guarda os itens do carrinho
  // Array de objetos: [{ id, name, price, quantity }, ...]
  const [cartItems, setCartItems] = useState([]);

  // Fun√ß√£o para adicionar produto ao carrinho
  const addToCart = (product) => {
    setCartItems(currentItems => {
      // Verifica se o produto j√° existe no carrinho
      const existingItem = currentItems.find(item => item.id === product.id);
      
      if (existingItem) {
        // Se existe, aumenta a quantidade
        return currentItems.map(item =>
          item.id === product.id
            ? { ...item, quantity: item.quantity + 1 }
            : item
        );
      } else {
        // Se n√£o existe, adiciona com quantidade 1
        return [...currentItems, { ...product, quantity: 1 }];
      }
    });
  };

  // Fun√ß√£o para remover produto do carrinho
  const removeFromCart = (productId) => {
    setCartItems(currentItems =>
      currentItems.filter(item => item.id !== productId)
    );
  };

  // Fun√ß√£o para atualizar quantidade de um produto
  const updateQuantity = (productId, newQuantity) => {
    if (newQuantity <= 0) {
      // Se quantidade √© 0 ou menor, remove o item
      removeFromCart(productId);
      return;
    }

    setCartItems(currentItems =>
      currentItems.map(item =>
        item.id === productId
          ? { ...item, quantity: newQuantity }
          : item
      )
    );
  };

  // Fun√ß√£o para limpar todo o carrinho
  const clearCart = () => {
    setCartItems([]);
  };

  // Calcula o total de itens no carrinho
  const getTotalItems = () => {
    return cartItems.reduce((total, item) => total + item.quantity, 0);
  };

  // Calcula o valor total do carrinho
  const getTotalPrice = () => {
    return cartItems.reduce(
      (total, item) => total + (item.price * item.quantity), 
      0
    );
  };

  // Objeto com dados e fun√ß√µes do carrinho
  const contextValue = {
    cartItems,
    addToCart,
    removeFromCart,
    updateQuantity,
    clearCart,
    getTotalItems,
    getTotalPrice,
  };

  return (
    &lt;CartContext.Provider value={contextValue}&gt;
      {children}
    &lt;/CartContext.Provider&gt;
  );
}

// Hook personalizado para usar o contexto do carrinho
export function useCart() {
  const context = useContext(CartContext);
  
  if (!context) {
    throw new Error('useCart deve ser usado dentro de CartProvider');
  }
  
  return context;
}</code></pre>

            <div class="highlight-box">
                <h4><span class="emoji">üìö</span>Explica√ß√µes importantes</h4>
                <p><strong>üîπ Array.find():</strong> Procura o primeiro item que atende uma condi√ß√£o.</p>
                <p><strong>üîπ Array.map():</strong> Cria um novo array transformando cada item.</p>
                <p><strong>üîπ Array.filter():</strong> Cria um novo array s√≥ com itens que atendem uma condi√ß√£o.</p>
                <p><strong>üîπ Array.reduce():</strong> "Reduz" um array a um √∫nico valor (soma, contagem, etc.).</p>
                <p><strong>üîπ Spread operator (...):</strong> Copia propriedades de um objeto/array.</p>
                <p><strong>üîπ Hook personalizado:</strong> Fun√ß√£o que usa outros hooks e pode ser reutilizada.</p>
            </div>

            <div class="next-part">
                <h3><span class="emoji">üöÄ</span>Pr√≥xima etapa</h3>
                <p>Agora que configuramos os contextos fundamentais, vamos criar as telas do aplicativo!</p>
                <a href="tutorial_parte2.html">Continuar para Parte 2: Telas e Funcionalidades ‚Üí</a>
            </div>
        </div>
    </div>

    <!-- Prism.js JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</body>
</html>
